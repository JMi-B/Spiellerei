[[17-21 November]] <->[[2025-11-18]]

| Zeit  | Termin      | Ort        |
| ----- | ----------- | ---------- |
| 7:30  | Kommen      | HomeOffice |
| 13:15 | Azubi Daily |            |
| 14:00 | R&D Sync    |            |
| 16:20 | Gehen       |            |
[[2025-11-14]]
# Aufgaben
- [x] Notizen von Fr. übertragen
	- [x] Workflow Anweisungen
	- [x] Aufgaben
- [x] Mit SQL überprüfen ob Conferenzroom existiert
- [x] PUT Änderung am Konferenzraum
- [ ] DELET den Konferanzraum 
#  Api Verbindung mit Authentifizierung auf der SwyxWare mit Python
#api #Swyx  #sql #python #cursor 
'Swagger' - Weboberfäche um Anfragen an die Swyxware zu stellen
Swyx Controllcenter für die Swyxware auf meiner VM
https://192.168.47.128:9201/ippbx/swagger/ui/index
## Workflow
#workflow #swagger
- VMWare starten
	- WinServer2022 starten
	- swyx Control Center
		- WebApp
		- PW*8
- Swagger
	- WepApp auf meinem lokalen Rechener
	- Mit der IPv4 Addresse meine VMWare
		- Longin mit BN und PW
			- Der Example Value wird ins credential-Feld übertragen und dort bearbeitet
			- Über den Button 'Try it out!' wird gestartet
			- Im Response Body werden der AccessToken, die UserId und der RefreshToken  als String angezeigt.
			- AccessToken kopieren
		- ConferenceRooms es stehen 5 Befehle zur Verfügung.
			- Get - Liste der Konferenzräume  - `requests.get
			- Post - einen neu erstellen - `requests.post
			- delet - einen bestimmten entfernen - `requests.delet
			- get - einen bestimmten Conferenzraum 
			- put - update/bearbeiten - `requests.put
		- Die letzten 3 brauchen eine intenalNumber
		- Post
			- wieder Example Value übernehmen und bearbeiten
			- Autorization: Token hinter bearer einfügen
			- Try it out!
	- Im SwyxControlCenter überprüfen ob der CR erstellt wurde
- Dieser Workflow kann in python abgebildet werden.
- C:\Users\juliane.bonenkamp\src\Internal.Azubi\Juliane\JMiArbeit\authentication.py
### Swagger
Swagger ist ein Tool um  zu entwickeln von APIs für Webservices. Es gibt die Möglichkeit sich bei der Swyx - Ware anzumelden. Es wird ein Token geliefert, dass dann benutzt werden kann um sich zu identifizieren. Das Token kann mit einem Code abgerufen und übergeben werden. Damit kann man Automatisierung erstellen. Swagger nutz JSON.
## Überprüfung mit einer SQL-Anfrage
aus 
C:\Users\juliane.bonenkamp\src\Internal.Azubi\Juliane\JMiArbeit\authentication.py
und
C:\Users\juliane.bonenkamp\src\Internal.Azubi\Juliane\JMiArbeit\VerbindungMSSqlServer02.py
wird
C:\Users\juliane.bonenkamp\src\Internal.Azubi\Juliane\JMiArbeit\authentication01.py
Das ist einfach. 
Zum überprüfen ob der Insert geklapp hat reicht keine einfache Select anfrage. Das Ergebnis muss auch existieren. Am besten werden dafür die DB einträge, die zur Select passen gezählt. das geht über zwei Wege.
### Mit einer ForSchleife
Dafür wird nach dem Selcet eine Variable definiert die mit `mycursor.fatchall()` gefüllt wird. Damit wird dann ein Counter und in eine ForSchleife gefüttert.
`def ConnectDB():
``    load_dotenv()
``    conn = connect(getenv("conn_str"))
``    mycursor = conn.cursor()
``    mycursor.execute("SELEzeCT * FROM InternalNumbers WHERE Number = 201")
``    selectErgebnis = mycursor.fetchall()
``    count = 0
`    for eintrag in selectErgebnis:
`        count +=1
`        print(eintrag)
``    print(count)

### Mit `rowcount`
Es gibt für den `cursor` das Property `rowcount` mit dem die ausgewählten Zeilen gezählt werden

`def ConnectDB():`
    `load_dotenv()`
    `conn = connect(getenv("conn_str"))`
    `mycursor = conn.cursor()`
    `mycursor.execute("SELECT * FROM InternalNumbers WHERE Number = 201")`
    `selectErgebnis = mycursor.fetchall()`
    `count = mycursor.rowcount`
    `print(selectErgebnis)`
    `print(count)`
## Änderungen und Delet
- Wie sieht das in Swagger aus?
	- über die InternelNumber
	- wird eine ähnliche Maske auf gerufen
	- Mit dem Token wird bestätigt.
- wie finde ich den Richtigen DS
	- InternalNumbers
	- Number = 201
- Wie steuere ich ihn an?
Der eigentliche Befehl ist
`response = requests.put(baseUrl + "tenant/conferencerooms/" + CurendInternalNumber, headers=myAuthHeaders, json=changeConferenceRoom, verify=False)`
Das `requests.put` gibt an, das es eine Änderung ist.
Für das anlegen eines DS ist es `requests.post`
- 
