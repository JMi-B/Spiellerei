
[[2025-11-07]] <-> [[2025-11-11]]

| Zeit  | Termin      |
| ----- | ----------- |
| 7:45  | Kommen      |
| 13:30 | Azubi Daily |
| 14:00 | A&D Sync    |
| 16:45 | gehen       |
# Datenbank 
#dbmodel #python #sql #pdf2Text 
[[2025-11-07#1. Pdf Verarbeitung]]
Pdf umwandel und Textspeichern
Vorlagen C:\Users\juliane.bonenkamp\HandArbeitenAnleitungenDB\scripts\JMiDB_funktion_pdf_bild_text_db_del.py
C:\Users\juliane.bonenkamp\src\JMiArbeit\test03.py
- [x] Text erstellen
- [x] Text zwischenspeichern
- das geht mit der python eigenenen Funktion ``open()`` die braucht neben dem Dateinamen als zweiten parameter den 'mode'.
	- r für read
	- a fürappand
	- w write
	- x Create 
		- zusätzlich t für text
`` with open("filename.txt", "w") as f:
	 ``f.write("überschreibt")
- [x] Funktion zum speichern basteln
	- [x] Dateiname und Pfad
		- [x] Pfad wo die jpg stehen
		- [x] gleicher Name wie die jpg nur ohne Nummer
	- [x] In die Datei soll der Inhalt der Variabel ``text_ganz
	- [x] Zeichensatz
		- `open('dateiname.txt', 'w', encoding='utf-8')`
- [x] Wenn der Text gespeichert ist, können die jpg weg
	- [x] Macht das sinn?
	- 3 pdf sind 3 MiB
	- mit jpg sind es 7,5 MiB
	- sofort löschen macht nur bei vielen DS und wenig Speicher sinn
[[2025-11-04#Neuer Ablauf]]
- [x] Verbindung zur DB
	- [x] Funktion erstellt
- [x] Richtigen DS finde update statt insert
- `def eintragDB(text_speicher, file):
`    mycursor.execute("UPDATE textdatei SET GanzerText = %s WHERE  Datename =%s",(text_speicher,file))
`    mydb.commit()
- Schreibt in die DB aber nur den Dateinamen nicht den Inhalt
- Fehler txt Datei ist eine Datei
	- erstmal in Sting um wandeln
	- muss aber der richtige Text sein
	- `with open("deine_datei.txt", "r", encoding="utf-8") as f:    text_inhalt = f.read()`
	- ``sql = "UPDATE deine_tabelle SET text_spalte = %s WHERE id = %s"
	 ``wert = (text_inhalt, 1) # Beispiel: für die Zeile mit ID = 1
     ``c.execute(sql, wert)
     ``conn.commit()
 - [ ] zweite for Schleife sonst baue ich die Datenbankverbindung immer auf und ab.
	 - der Abbau der DB erfolgt erst nach der For-Schleife, die VErbindung beleibt bestehen
		 - DAs ist nicht das ziel
	 - [ ] Datein und Pfad finden. Aus der anderen funktion übergeben.
	 - [x] Dateiname ist Dateiname.pdf ohne pdf sondern mit txt
		 - genauso wie ich speichere
	 - Als return werte der ersten for Schleife ausgeben, speichern ?
- [x] select-statment
- [x] Was pasiert wenn ich einen Text speichere und keinen DS habe?
	- [x] die PDF Datei wird mit den anderen gelöscht
- [ ] Was macht die Anleitung einzigartig für ``AnleitungExist``?
 - Dateiname
 - Um zu verhindern, das ein pdf gelöscht wird für das noch kein DS angelegt wurde
	 - [ ] if ob ein DS existiert
	 - true einfügen
	 - false Print( für  dieses Pdf existert kein DS)
	 - Es macht keinen Sinn den ganzen Prozess der Umwandlung zu durch laufen, um dann nicht weiter zu machen.
	 - [ ] Am anfang der Forschleife entscheiden.
	 - dann muss die Verbindung zu DB schon stehen.
	 - [x] Verbindung zur DB wieder an den Anfang 
- #### Was macht die Datei einzigartig für den case?
	- Dateiname
	- NameAnleitung - steht nicht in der gleichen DB Tabelle aber in der gleichen CSV -Tabelle
	- Pfad - Die Dateien werde vor dem hochladen in ein Verzeichnis kopiert
		- Das ist nicht der Pfad wo die Datei liegt
		- Dubletten werden in der Vorbereitung weitgehend ausgeschlossen
	- [ ] Warum wird in der `medium`-Tabelle für die Texte keine `MedienArt` angezeigt? 
		- vergessen ein zu fügen?
		- Problem in daten_import09.py?
# Swyx
#Swyx #vm #sip
In der VM im Swyx Kontrolcenter mit dem User Import tool User angelegt
Trunk angelegt (TelefonLeitung)
TrunkGroup angelegt
mit dem SIP Balster Probeanrufe genneriert und als DB/ gespeicher
=> Auswertung über sql